<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Genesys Cloud Quiz</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .question { margin-bottom: 20px; }
        .answers button { display: block; margin: 5px 0; }
        .feedback { margin-top: 10px; font-weight: bold; }
        #nextBtn { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Genesys Cloud Certification Quiz</h1>
    <div id="quizContainer">
        <div id="questionArea" class="question"></div>
        <div id="answersArea" class="answers"></div>
        <div id="feedbackArea" class="feedback"></div>
        <button id="nextBtn" style="display:none;">Next</button>
    </div>
    <script>
        let questions = [];
        let current = 0;
        let score = 0;

        fetch('quiz_bank.json')
            .then(response => response.json())
            .then(data => {
                questions = shuffle(data).slice(0, 55);
                showQuestion();
            });

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function showQuestion() {
            document.getElementById('feedbackArea').innerText = '';
            document.getElementById('nextBtn').style.display = 'none';
            const q = questions[current];
            document.getElementById('questionArea').innerText = `Question ${current + 1}: ${q.question}`;
            const answersArea = document.getElementById('answersArea');
            answersArea.innerHTML = '';
            q.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(idx);
                answersArea.appendChild(btn);
            });
        }

        function checkAnswer(selected) {
            const q = questions[current];
            const correctIndex = q.options.indexOf(q.correct_answer);
            const feedback = document.getElementById('feedbackArea');
            if (selected === correctIndex) {
                feedback.innerText = '✅ Correct! ' + q.explanation;
                score++;
            } else {
                feedback.innerText = `❌ Incorrect. Correct answer: ${q.correct_answer}. ` + q.explanation;
            }
            document.getElementById('nextBtn').style.display = 'inline';
        }

        document.getElementById('nextBtn').onclick = () => {
            current++;
            if (current < questions.length) {
                showQuestion();
            } else {
                document.getElementById('quizContainer').innerHTML = `<h2>Quiz Completed!</h2><p>Your score: ${score} out of ${questions.length}</p>`;
            }
        };
    </script>
</body>
</html>
